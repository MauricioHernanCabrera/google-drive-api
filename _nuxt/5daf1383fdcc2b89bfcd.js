(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{167:function(e,t,n){var content=n(173);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(68).default)("03d20ef0",content,!0,{sourceMap:!1})},172:function(e,t,n){"use strict";var r=n(167);n.n(r).a},173:function(e,t,n){(e.exports=n(67)(!1)).push([e.i,".m-5[data-v-15e16c2c]{margin:5px}",""])},175:function(e,t,n){"use strict";n.r(t);var r=n(7),c=(n(36),n(35),n(33),n(4)),o=n(32),l={name:"Upload",data:function(){return{form:{files:[]},progress:[],sending:!1,sucess:!1}},methods:{onFileChange:function(e){this.form.files=e.target.files},createFolderWithFiles:function(){var e=Object(c.a)(regeneratorRuntime.mark(function e(){var t,n,r,c,o,l,d,f,h,m,v,i,y=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.sending=!0,this.sucess=!1,e.prev=2,t=new Date,n="".concat(this.pad2(t.getFullYear())),r="".concat(this.pad2(t.getMonth()+1)),c="".concat(this.pad2(t.getDate())),o="".concat(this.pad2(t.getHours())),l="".concat(this.pad2(t.getMinutes())),d="".concat(this.pad2(t.getSeconds())),f=this.baseFolder.id,e.next=8,this.createFolder(f,"".concat(c,"/").concat(r,"/").concat(n,"   ").concat(o,"h:").concat(l,"m:").concat(d,"s"));case 8:return h=e.sent,e.next=11,this.createPermission(h.result.id);case 11:e.sent,m=this.form.files,[],v=regeneratorRuntime.mark(function e(i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.createFile(h.result.id,m[i],function(e){var progress=JSON.parse(JSON.stringify(y.progress));progress[i]={percentaje:y.calculatePercent(e),event:e},y.progress=progress});case 2:case"end":return e.stop()}},e)}),i=0;case 16:if(!(i<m.length)){e.next=21;break}return e.delegateYield(v(i),"t0",18);case 18:i++,e.next=16;break;case 21:this.progress=[],this.form.files=[],this.sucess=!0,this.$router.push("/folders/".concat(h.result.id)),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(2),console.log(e.t1);case 30:return e.prev=30,this.sending=!1,e.finish(30);case 33:case"end":return e.stop()}},e,this,[[2,27,30,33]])}));return function(){return e.apply(this,arguments)}}(),createFile:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new Blob([t],{type:t.type}),c={name:t.name,parents:[e]},o=gapi.auth.getToken().access_token,form=new FormData;form.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),form.append("file",r);var l={headers:{Authorization:"Bearer "+o},onUploadProgress:n};return this.$axios.$post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",form,l)},createFolder:function(e,t){return gapi.client.drive.files.create({name:t,mimeType:"application/vnd.google-apps.folder",parents:[e]})},createPermission:function(e){return gapi.client.drive.permissions.create({resource:{type:"anyone",role:"reader"},fileId:e})},calculatePercent:function(e){try{return Math.round(100*e.loaded/e.total)}catch(e){return 0}},pad2:function(e){return 1==String(e).length?"0".concat(e):e}},computed:Object(r.a)({},Object(o.b)("user",["baseFolder"]))},d=(n(172),n(19)),component=Object(d.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.sending?e._e():n("form",{on:{submit:function(t){return t.preventDefault(),e.createFolderWithFiles(t)}}},[n("input",{staticClass:"m-5",attrs:{type:"file",multiple:""},on:{change:e.onFileChange}}),e._v(" "),n("br"),e._v(" "),e.form.files.length?n("button",{staticClass:"m-5",attrs:{type:"submit"}},[e._v("Subir archivo")]):e._e()]),e._v(" "),n("div",[n("h3",{staticStyle:{margin:"0"}},[e._v(e._s(e.sending?"Enviando":""))]),e._v(" "),n("h3",{staticStyle:{margin:"0"}},[e._v(e._s(e.sucess?"Terminado":""))]),e._v(" "),n("ul",{staticStyle:{margin:"0",padding:"0"}},e._l(e.form.files,function(t,r){return n("li",{key:r,staticStyle:{display:"flex","justify-content":"space-between"}},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("span",[e._v(e._s(e.progress[r]?e.progress[r].percentaje:0)+"%")])])}),0)])])},[],!1,null,"15e16c2c",null);t.default=component.exports}}]);